# Read the Docs configuration file for Sphinx projects
# See https://docs.readthedocs.io/en/stable/config-file/v2.html for details

# Required
version: 2

build:
  os: ubuntu-24.04
  tools:
    python: "3.12"
  jobs:
    pre_build:
      - asdf install rust 1.90.0
      - asdf global rust 1.90.0
      - py=$(which python) && base="${py%python}" && export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:${base}../lib" && cd ratspy && cargo run --bin stub_gen --no-default-features
      - cd ratspy && maturin build
      - file=target/wheels/*.whl && pip install ${file}

sphinx:
  configuration: ratspy/docs/conf.py

python:
  install:
    - requirements: ratspy/docs/requirements.txt